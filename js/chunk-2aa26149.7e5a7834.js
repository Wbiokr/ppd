(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2aa26149"],{a113:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vw-routing p-b-20"},[t._m(0),t._v(" "),s("nav",{staticClass:"clearfix b-eee b-no-lr b-no-t w-per-100 p-lr-20"},[s("div",{staticClass:"w-per-30 f-l h-50 f-s-c"},[s("el-tooltip",{attrs:{content:"切换"}},[s("icon-font",{attrs:{type:"icon-icon-qihuan c-666 c-p m-r-30 o-hover-70"}})],1),t._v(" "),s("el-tooltip",{attrs:{content:"返回"}},[s("icon-font",{attrs:{type:"icon-chehui c-666 c-p m-r-30 o-hover-70"}})],1)],1),t._v(" "),s("div",{staticClass:"w-per-70 f-r h-50 f-b-c p-l-20"},[s("section",{staticClass:"f-s-c"},[s("el-tooltip",{attrs:{content:"新增"}},[s("icon-font",{attrs:{type:"icon-icon- c-666 c-p m-r-30 o-hover-70"}})],1),t._v(" "),s("el-tooltip",{attrs:{content:"删除"}},[s("icon-font",{attrs:{type:"icon-icon7 c-666 c-p m-r-30 o-hover-70"}})],1),t._v(" "),s("el-tooltip",{attrs:{content:"distribution"}},[s("icon-font",{attrs:{type:"icon-icon-1 c-666 c-p m-r-30 o-hover-70"}})],1),t._v(" "),s("el-tooltip",{attrs:{content:"document"}},[s("icon-font",{attrs:{type:"icon-wenjian c-666 c-p m-r-30 o-hover-70"}})],1),t._v(" "),s("el-dropdown",[s("icon-font",{attrs:{type:"icon-xian c-666 c-p m-r-30 o-hover-70"}}),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("icon-font",{attrs:{type:"icon-solid_arrows f-s-28"}})],1),t._v(" "),s("el-dropdown-item",[s("icon-font",{attrs:{type:"icon-dashed_arrows f-s-28"}})],1)],1)],1)],1),t._v(" "),s("section",{staticClass:"f-s-c"},[s("el-tooltip",{attrs:{content:"保存"}},[s("icon-font",{attrs:{type:"icon-iconset0238 c-666 c-p m-r-30 o-hover-70"}})],1),t._v(" "),s("el-tooltip",{attrs:{content:"发布"}},[s("icon-font",{attrs:{type:"icon-fabu c-666 c-p m-r-30 o-hover-70"}})],1),t._v(" "),s("el-select",{staticClass:"m-r-10 w-120",attrs:{size:"small"},on:{change:t.getRoutingDetail},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.stateList,(function(t,e){return s("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1),t._v(" "),s("el-tag",{staticClass:"w-50 f-c t-c",attrs:{type:"info"}},[t._v(t._s(t.version))])],1)])]),t._v(" "),s("main",{staticClass:"clearfix w-per-100 p-r"},[s("article",{staticClass:"w-per-30 f-l "},[s("el-table",{staticClass:"w-per-100",attrs:{data:t.wsList,border:""}},[s("el-table-column",{attrs:{prop:"ws",label:"WS"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[s("span",{staticClass:"w-b-keep white-1",attrs:{title:o.ws}},[t._v(t._s(o.ws))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"Name"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[s("span",{staticClass:"w-b-keep white-1",attrs:{title:o.name}},[t._v(t._s(o.name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"designation",label:"Designation "},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[s("span",{staticClass:"w-b-keep white-1",attrs:{title:o.designation}},[t._v(t._s(o.designation))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"qty",label:"Qty"}}),t._v(" "),s("el-table-column",{attrs:{prop:"drawing_number",label:"Drawing/Reference"}}),t._v(" "),s("el-table-column",{attrs:{prop:"drawing_idx",label:"Real drawing index"}}),t._v(" "),s("el-table-column",{attrs:{prop:"procu_type",label:"Procument type",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[s("el-tag",{staticClass:"p-a-c t-c",attrs:{type:"P"===o.procu_type?"primary":"success","disable-transitions":""}},[t._v(t._s(o.procu_type))])]}}])})],1)],1),t._v(" "),s("article",{staticClass:"p-r w-per-70 f-r p-l-20 h-per-100",attrs:{id:"diagramContainer"}},[t._l(t.wsList,(function(t,e){return s("span",{key:t.id+","+e+","+Math.random(),staticClass:"w-10  bg-color-333 p-a",style:{height:"46.25px",top:t.top+"px",left:"-15px"},attrs:{id:"part-"+t.id}})})),t._v(" "),t._l(t.blockList,(function(e,o){return s("section",{key:o,staticClass:"p-a",style:{top:e.pos_y+"px",left:e.pos_x+"px"},attrs:{id:e.id}},[s("header",{staticClass:"f-s-c p-a",staticStyle:{top:"-22px"}},[s("span",{staticClass:"b-ccc b-r-4 f-s-14 f-w-600 h-20 p-lr-5 f-c"},[t._v(t._s(e.ws))]),t._v(" "),s("em",{staticClass:"f-s-12 m-l-5 c-666"},[t._v("63")])]),t._v(" "),s("main",{staticClass:"f-s-c"},[s("el-dropdown",{attrs:{size:"medium",trigger:"click"},on:{command:function(t){return e.process_type=t}}},[s("div",{staticClass:"bg-color-green w-50 h-25 f-c c-p o-hover-70 c-000"},[t._v(t._s(e.process_type))]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.processList,(function(e,a){return s("el-dropdown-item",{key:o+","+a,staticClass:"w-80 t-c",attrs:{command:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),s("el-dropdown",{attrs:{size:"medium",trigger:"click"},on:{command:function(t){return e.control_code=t}}},[s("div",{staticClass:"b-ddd w-50 h-25 f-c c-p o-hover-70"},[t._v(t._s(e.control_code))]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.controlList,(function(e,a){return s("el-dropdown-item",{key:o+","+a,staticClass:"w-80 t-c",attrs:{command:e.value}},[t._v(t._s(e.value))])})),1)],1)],1)])}))],2)])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"clearfix p-20 bg-color-eee w-per-100"},[s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("PTO")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Plant")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Prepared by")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Updated By")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Updated By")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Approve by: Xia Yishun")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Customer")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Name")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Dwg+index")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Cycle time(TMU)")]),t._v(" "),s("span",{staticClass:"p-lr-30 p-tb-5 b-fff b-r-4 bg-color-fff f-l f-s-14 m-r-20 m-tb-5"},[t._v("Cycle time(sec)")])])}];s("5ab2"),s("e10e");function n(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){return n(t)||r(t)||c()}s("cc57");var i=s("9d37"),p=(s("6d57"),s("52c1"),s("df2b"),s("b775")),f=function(t){return Object(p["a"])({url:"/api/project/".concat(t.id,"/routing"),method:"get",params:t})};function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function b(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={data:function(){return{console:window.console,state:"1",version:"",stateList:[{value:"1",label:"Working"},{value:"2",label:"For Release"},{value:"3",label:"Released"}],processList:[{value:"Fin",label:"Fin",des:"Final visual check"},{value:"PC&S",label:"PC&S",des:"Test of Sensor availability function and Protection cup presence"},{value:"PA",label:"PA",des:"Parts Assembly"},{value:"DW",label:"DW",des:"disassemble station"},{value:"FT",label:"FT",des:"Fan test"},{value:"Ass1",label:"Ass1",des:"Assembly station 1"},{value:"Ass2",label:"Ass2",des:"Assembly station 2"},{value:"Ass3",label:"Ass3",des:"Assembly station 3"},{value:"Ass4",label:"Ass4",des:"Assembly station 4"},{value:"Ass7",label:"Ass7",des:"Assembly station 7"},{value:"LT",label:"LT",des:"Leak testing"},{value:"LOG",label:"LOG",des:"Packing, shipping"},{value:"L",label:"L",des:"product label"}],controlList:[{value:"F/L",des:"First/last-piece inspection 首末件检查"},{value:"PC",des:"Process control 过程控制"},{value:"SPC",des:"SPC inspections SPC检查"},{value:"100",des:"100% inspection 100%全检"},{value:"FI",des:"First piece insp.首检"},{value:"D",des:"Dimension Check尺寸检验"}],groups:[],wsList:[],blockList:[],connections:[]}},computed:{},created:function(){this.getRoutingDetail()},mounted:function(){},methods:{drawPlumb:function(){this.connections.forEach((function(t){jsPlumb.connect({source:t.from,target:t.to,connectionsDetachable:!1,connector:"StateMachine",anchors:["BottomLeft","Right"],maxConnections:-1,paintStyle:{stroke:"#ccc",strokeWidth:1},endpoint:["Dot",{radius:5}]})})),this.blockList.forEach((function(t){jsPlumb.draggable(t.id)})),jsPlumb.setContainer("diagramContainer")},getRoutingDetail:function(){var t=this;f({state:this.state,id:this.$route.params.id}).then((function(e){if(0==e.code){t.version=e.data.version,t.groups=e.data.groups;var s=[],o=[],a=e.data.connections||[],n=document.querySelector(".el-table_1_column_1").offsetHeight;e.data.groups.forEach((function(t,e){t.parts.forEach((function(e){s.push(b({},e,{ws:t.ws.name,top:46.25*s.length+n}))})),t.blocks.forEach((function(s,n){var r=0==t.pos_x&&e>0?200*e+40:t.pos_x,c=0==t.pos_y&&n>0?150*n:t.pos_y;o.push(b({},s,{pos_x:Math.max(r,40),pos_y:Math.max(c,20),id:"".concat(t.id,"-").concat(n),ws:t.ws.name})),a=[].concat(l(a),l(s.parts.map((function(e,s){return{to:"part-".concat(e.id),from:"".concat(t.id,"-").concat(n),type:3}}))))}))})),t.wsList=s,t.blockList=o,t.connections=a,t.$nextTick((function(){t.drawPlumb()}))}})).catch((function(){}))}}},v=d,m=s("5511"),_=Object(m["a"])(v,o,a,!1,null,null,null);e["default"]=_.exports},df2b:function(t,e,s){"use strict"}}]);